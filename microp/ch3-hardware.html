<div>
<h1>3. HARDWARE STRUCTURE OF THE CPU </h1>
<h2>3.1 SCHEMATIC OF THE CPU </h2>
  .<br>
  ..<br>
  ..<br>
  ..<br>
  Register Bank and the ALU
  ..<br>
  ..<br>
  ..<br>
<h2>3.2 CPU as a FSM </h2>


<p>Remember finite state machines (FSM's): They have a set of states and an input. Depending on the input, they go from one
state to other</p>
<p>The CPU is a very simple finite state machine (FSM). It starts in the (FETCH, ZF) state.
Depending on the input (instruction coming from memory), it can go to LDI, LD1, ST1, JZ, JMP, ALU states. ...
The rule is: When we start to execute an instruction, its address is ready at AR. Hence, a very important
duty of every instruction is to put the address of the next instruction into AR before being completed.</p>

  <table class="table table-bordered">
    <thead>
    <tr>
      <td>State</td>
      <td>Active Signals</td>
    </tr>
    </thead>
    <tbody>
    <tr>
      <td>FETCH</td>
      <td>IRLOAD, PC++, AR++</td>
    </tr>
    <tr>
      <td>LDI</td>
      <td>PC++, AR++, REGWT, MUX=frommem</td>
    </tr>
    <tr>
      <td>LD1</td>
      <td>ARLD, MUX=fromright, ARMUX=frommux</td>
    </tr>
    <tr>
      <td>LD2</td>
      <td> ARLD, MUX=frommem, ARMUX=fromPC , REGWT</td>
    </tr>
    <tr>
      <td>ST1</td>
      <td>ARLD, MUX=fromright, ARMUX=frommux</td>
    </tr>
    <tr>
      <td>ST2</td>
      <td>ARLD, ARMUX=fromPC, MUX=fromright, MWT</td>
    </tr>
    <tr>
      <td>JZ</td>
      <td> if (ZF==0) execute FETCH ELSE execute JMP </td>
    </tr>
    <tr>
      <td>JMP</td>
      <td>ARMUX=fromIR, ARLD, PCLD </td>
    </tr>
    <tr>
      <td>ALU</td>
      <td>MUX=fromALU, REGLD, ZFLD</td>
    </tr>
    </tbody>

  </table>

FETCH: IRLOAD, PC++, AR++

LDI: PC++, AR++, REGWT, MUX=frommem <br><br>

LD1: ARLD, MUX=fromright, ARMUX=frommux  <br>
LD2: ARLD, MUX=frommem, ARMUX=fromPC , REGWT<br><br>

ST1: ARLD, MUX=fromright, ARMUX=frommux  <br>
ST2: ARLD, ARMUX=fromPC, MUX=fromright, MWT

JZ: if (ZF==0) execute FETCH ELSE execute JMP <br><br>

JMP: ARMUX=fromIR, ARLD, PCLD <br><br>

ALU: MUX=fromALU, REGLD, ZFLD
<h2>3.4 CONTROL UNIT </h2>

</div>